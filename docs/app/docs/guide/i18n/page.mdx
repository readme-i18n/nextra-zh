---

icon: GlobeIcon
---

import { ExampleCode } from '@components/example-code'
import { Steps } from 'nextra/components'

# Next.js 国际化支持

> [!WARNING]
>
> 此功能仅在 `nextra-theme-docs` 中可用

Nextra 开箱即用地支持
[Next.js 国际化路由](https://nextjs.org/docs/advanced-features/i18n-routing)
。本文档将说明如何配置和使用该功能。

<Steps>
## 添加国际化配置

要为 Nextra 应用添加多语言页面，首先需要在 `next.config.mjs` 中配置 `i18n`：

```js filename="next.config.mjs" {8-11}
import nextra from 'nextra'

const withNextra = nextra({
  // ... other Nextra config options
})

export default withNextra({
  i18n: {
    locales: ['en', 'zh', 'de'],
    defaultLocale: 'en'
  }
})
```

> [!NOTE]
>
> 在 `next.config` 文件中定义语言环境时，可以使用任何格式的
> [UTS 区域标识符](https://www.unicode.org/reports/tr35/tr35-59/tr35.html#Identifiers)，
> 例如带地区的语言格式 `en-US`（美国使用的英语）。

## 配置文档主题

在 `theme.config.jsx` 中添加 `i18n` 选项来配置语言下拉菜单：

```js filename="theme.config.jsx"
i18n: [
  { locale: 'en', name: 'English' },
  { locale: 'zh', name: '中文' },
  { locale: 'de', name: 'Deutsch' },
  { locale: 'ar', name: 'العربية', direction: 'rtl' }
]
```

## 自动检测并重定向至用户首选语言（可选）

可以自动检测用户偏好的语言并重定向至对应语言版本的网站。要实现此功能，需在项目根目录创建 `middleware.ts` 或 `middleware.js` 文件，并从 `nextra/locales` 导出 Nextra 的中间件函数：

<ExampleCode example="swr-site" filePath="middleware.ts" metadata="{1}" />

> [!WARNING]
>
> 此方法不适用于在 `nextConfig` 中配置了 `output: 'export'` 的静态导出国际化网站。

## 自定义 404 页面（可选）

对于使用共享主题布局的国际化网站，可以创建带翻译的自定义 `not-found.jsx`。具体实现可参考 [SWR 国际化示例](https://github.com/shuding/nextra/blob/c9d0ffc8687644401412b8adc34af220cccddf82/examples/swr-site/app/%5Blang%5D/not-found.ts)。

</Steps>