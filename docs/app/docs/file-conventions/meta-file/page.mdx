---

icon: FileIcon
sidebarTitle: _meta.js
description:
  Nextra 中的 `_meta` 文件允许您自定义页面侧边栏标题、排序和主题可见性，从而优化站点组织结构和用户体验。
---

import { ContentAndAppFileTee } from 'components/content-and-app-file-tree'
import { Video } from 'components/video'
import { FileTree } from 'nextra/components'
import { generateTsFromZod } from 'nextra/tsdoc'
import { pageThemeSchema } from 'private-next-root-dir/../packages/nextra/dist/server/schemas'

export function Block({ children }) {
  return (
    <div className="flex gap-2 *:last:w-full *:last:min-w-0 max-lg:flex-wrap">
      {children}
    </div>
  )
}

# `_meta.js` 文件

在 Nextra 中，站点和单个页面的结构可以通过同目录下的 `_meta` 文件进行配置。这些配置会影响 Nextra 主题的整体布局，特别是导航栏和侧边栏：

<figure>
  <>![Example of Nextra Theme Docs](/assets/routing@1x.png)</>
  {/* prettier-ignore */}
  <figcaption>Example: [Nextra Docs Theme](/docs/docs-theme) has sidebar and navbar generated automatically from Markdown files.</figcaption>
</figure>

{/* It's very common to customize each page's title, rather than just relying on filenames. Having a page titled "Index" lacks clarity. It is preferable to assign a meaningful title that accurately represents the content, such as "Home". */}

{/* That's where `_meta` files comes in. You can have an `_meta` file in each directory, and it will be used to override the default configuration of each page. */}

## 文件组织方式

Nextra 支持以下文件组织方式：

- **在 Next.js 的 [`app` 目录](https://nextjs.org/docs/app/getting-started/project-structure#top-level-folders)中：**<br />Nextra 会收集所有 `page` 文件，包括 [`page.md` 和 `page.mdx` 文件](/docs/file-conventions/page-file) 以及 `_meta` 文件。

- **在 Nextra 的 [`content` 目录](/docs/file-conventions/content-directory)中：**<br/>Nextra 会收集所有 `.md` 和 `.mdx` 文件，以及 `_meta` 文件。

以下展示了 `content` 目录和纯 `app` 目录下相同的基于文件路由的结构：

<ContentAndAppFileTee>
  <FileTree.Folder name="about" defaultOpen>
    <FileTree.File name="_meta.js" active />
    <FileTree.File name="index.mdx" />
    <FileTree.File name="legal.md" />
  </FileTree.Folder>
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="contact.md" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>

> [!NOTE]
>
> 您可以在项目中组合使用这两种组织方式：
>
> - [x] 包含 `.mdx` 文件的 `content` 目录
> - [x] 包含 `page` 文件的 `app` 目录

### `pageMap` 结构

随后，Nextra 会生成一个包含整个站点路由和目录结构信息的 `pageMap` 数组。导航栏和侧边栏等功能都可以基于 `pageMap` 信息自动生成。

生成的 `pageMap` 结构如下：

```jsonc filename="pageMap" copy=false
[
  // content/_meta.js
  { "data": {} },
  {
    // content/index.mdx
    "name": "index",
    "route": "/",
    "title": "Index",
    "frontMatter": {}
  },
  {
    // content/contact.md
    "name": "contact",
    "route": "/contact",
    "title": "Contact",
    "frontMatter": {}
  },
  {
    // content/about
    "name": "about",
    "route": "/about",
    "title": "About",
    "children": [
      // content/about/_meta.js
      { "data": {} },
      {
        // content/about/index.mdx
        "name": "index",
        "route": "/about",
        "title": "Index",
        "frontMatter": {}
      },
      {
        // content/about/legal.md
        "name": "legal",
        "route": "/about/legal",
        "title": "Legal",
        "frontMatter": {}
      }
    ]
  }
]
```

Nextra 会将全局的 `pageMap` 导入到每个页面中。然后，配置的主题会使用该 `pageMap` 来渲染实际界面。

## API

侧边栏/导航栏中显示的页面标题和顺序可以通过 `_meta` 文件中的键值对进行配置。

```ts filename="_meta.ts"
import type { MetaRecord } from 'nextra'

/**
 * type MetaRecordValue =
 *  | TitleSchema
 *  | PageItemSchema
 *  | SeparatorSchema
 *  | MenuSchema
 *
 * type MetaRecord = Record<string, MetaRecordValue>
 **/
const meta: MetaRecord = {
  // ...
}

export default meta
```

### `title` 类型

在 `_meta` 文件中指定 `title` 时，可以将其定义为简单字符串或 JSX 元素。

```ts copy=false
type TitleSchema = string | ReactElement
```

对于以下文件结构：

<ContentAndAppFileTee className="shrink-0">
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="about.mdx" />
  <FileTree.File name="contact.mdx" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>

以下 `_meta` 文件定义了页面标题：

```jsx filename="_meta.jsx"
import { GitHubIcon } from 'nextra/icons'

export default {
  index: 'My Homepage',
  // You can use JSX elements to change the look of titles in the sidebar, e.g. insert icons
  contact: (
    <Italic className="my-class">
      <GitHubIcon height="20" />
      Contact Us
    </Italic>
  ),
  about: {
    // Alternatively, you can set title with `title` property
    title: 'About Us'
    // ... and provide extra configurations
  }
}

// Custom component for italicized text
function Italic({ children, ...props }) {
  return <i {...props}>{children}</i>
}
```

### 页面配置

在 `_meta` 文件中可以定义页面在侧边栏中的显示方式，例如对于以下文件结构：

<Block>
<ContentAndAppFileTee className='shrink-0'>
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="about.mdx" />
  <FileTree.File name="contact.mdx" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>
```js filename="_meta.js" copy=false
export default {
  index: 'My Homepage',
  contact: 'Contact Us',
  about: 'About Us'
}
```
</Block>

> [!NOTE]
>
> 如果某些路由未在 `_meta` 文件中列出，它们会被追加到侧边栏末尾并按字母顺序排序（`index` 键除外，若未在 `_meta` 中指定则会优先显示）。

```ts
type PageItemSchema = {
  type: 'page' | 'doc' // @default 'doc'
  display: 'normal' | 'hidden' | 'children' // @default 'normal'
  title?: TitleSchema
  theme?: PageThemeSchema
}
```

#### `type: 'page'` 选项

通过将顶级页面或文件夹定义为 `type: 'page'{:js}`，它将在导航栏上显示为特殊页面而非侧边栏。利用此特性，您可以创建多个"子文档"以及始终可见的特殊页面或链接（如"联系我们"）。

例如，您可以在项目中创建两个文档文件夹 `frameworks` 和 `fruits`。在顶层 `_meta` 文件中，可以将所有内容设置为页面而非普通侧边栏项目：

<Block>
<ContentAndAppFileTee className='shrink-0'>
  <FileTree.Folder name="frameworks" defaultOpen active>
    <FileTree.File name="react.mdx" />
    <FileTree.File name="svelte.mdx" />
    <FileTree.File name="vue.mdx" />
  </FileTree.Folder>
  <FileTree.Folder name="fruits" defaultOpen active>
    <FileTree.File name="apple.mdx" />
    <FileTree.File name="banana.mdx" />
  </FileTree.Folder>
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="about.mdx" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>
```js filename="_meta.js" copy=false {4,8,12,16}
export default {
  index: {
    title: 'Home',
    type: 'page'
  },
  frameworks: {
    title: 'Frameworks',
    type: 'page'
  },
  fruits: {
    title: 'Fruits',
    type: 'page'
  },
  about: {
    title: 'About',
    type: 'page'
  }
}
```
</Block>

效果将如下所示：

<figure>
  <Video src="/assets/docs/sub-docs.mp4" />
  {/* prettier-ignore */}
  <figcaption>[Live example on StackBlitz](https://stackblitz.com/edit/nextra-2-docs-eszspq?file=pages%2F_meta.js)</figcaption>
</figure>

> [!TIP]
>
> 您还可以通过 [`display: 'hidden'{:js}`](#display-hidden-option) 选项隐藏导航栏中的 `Home` 等链接。
>
> 导航栏中可以包含外部链接，类似于 [links 章节](#links)：
>
> ```js filename="_meta.js" {4-5}
> export default {
>   contact: {
>     title: 'Contact Us',
>     type: 'page',
>     href: 'https://example.com/contact'
>   }
> }
> ```

#### `display: 'hidden'` 选项

默认情况下，文件系统中的所有 MDX 路由都会显示在侧边栏。但您可以通过 `display: 'hidden'{:ts}` 配置隐藏特定页面或文件夹：

```js filename="_meta.js" {3}
export default {
  contact: {
    display: 'hidden'
  }
}
```

> [!NOTE]
>
> 页面仍可通过 `/contact` URL 访问，但不会显示在侧边栏中。

#### `theme` 选项

您可以使用 `theme` 选项为每个页面配置主题。例如，可以针对特定页面禁用或启用特定组件：

```js filename="_meta.js" {4}
export default {
  about: {
    theme: {
      sidebar: false
    }
  }
}
```

> [!WARNING]
>
> 此选项若设置在文件夹上，将被所有子页面继承。

<APIDocs
  code={`type $ = ${generateTsFromZod(pageThemeSchema)}
export default $`}
/>

##### 布局

默认情况下，每个页面在主题配置中都包含 `layout: 'default'{:js}`，这是标准行为。若需要让某些页面撑满整个容器宽度和高度，同时保留其他样式，可以使用 `'full'{:js}` 布局实现：

```js filename="_meta.js" {4}
export default {
  about: {
    theme: {
      layout: 'full'
    }
  }
}
```

##### 排版设置 [#typesetting-section]

`typesetting` 选项控制排版细节，包括字体特性、标题样式以及 `<li>` 和 `<code>` 等组件样式。文档主题提供 `'default'{:js}` 和 `'article'{:js}` 两种排版预设。

默认预设适用于文档等大多数场景，而 `'article'{:js}` 预设可使页面呈现优雅的文章版式：

<figure>
```js filename="_meta.js" {4}
export default {
  about: {
    theme: {
      typesetting: 'article'
    }
  }
}
```
  <figcaption>[Live example on StackBlitz](https://stackblitz.com/edit/nextra-2-docs-hg77h3?file=pages%2F_meta.js,pages%2Findex.mdx)</figcaption>
</figure>

### 文件夹

文件夹的配置方式与页面完全相同。

例如，以下顶层 `_meta` 文件包含顶层页面和文件夹的元信息。<br/> 嵌套的 `_meta` 文件则包含同文件夹内页面的元信息：

<Block>
<ContentAndAppFileTee className='shrink-0'>
  <FileTree.Folder name="fruits" defaultOpen>
    <FileTree.File name="_meta.js" active />
    <FileTree.File name="apple.mdx" />
    <FileTree.File name="banana.mdx" />
  </FileTree.Folder>
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="about.mdx" />
  <FileTree.File name="contact.mdx" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>
<div className='mt-6'>
```js filename="_meta.js" copy=false
export default {
  index: 'My Homepage',
  contact: 'Contact Us',
  fruits: 'Delicious Fruits',
  about: 'About Us'
}
```
```js filename="fruits/_meta.js" copy=false
export default {
  apple: 'Apple',
  banana: 'Banana'
}
```
</div>
</Block>

> [!NOTE]
>
> 移动目录时无需修改 `_meta` 文件，因为页面信息是按目录分组管理的。

#### 使用 `/index` 页面

如需创建带索引页的文件夹，需在其 front matter 中添加 `asIndexPage: true{:js}`。

例如，要创建 `/fruits` 路由，设置 `asIndexPage: true{:js}` 会告知 Nextra `/fruits` 是一个包含索引页的文件夹。点击侧边栏中的文件夹将展开它并显示 MDX 页面。

<Block>
<ContentAndAppFileTee className="shrink-0">
  <FileTree.Folder name="fruits" defaultOpen active>
    <FileTree.File name="_meta.js" />
    <FileTree.File name="apple.mdx" />
    <FileTree.File name="banana.mdx" />
    <FileTree.File name="index.mdx" active />
  </FileTree.Folder>
  <FileTree.File name="_meta.js" />
  <FileTree.File name="about.mdx" />
  <FileTree.File name="contact.mdx" />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>
```mdx filename="content/fruits/index.mdx or app/fruits/page.mdx" copy=false {4}
---
title: All Fruits
sidebarTitle: 🍒 Fruits
asIndexPage: true
---
```

</Block>

### 链接

```ts
type LinkSchema = {
  href: string
  title?: TitleSchema
}
```

您可以通过在 `_meta` 文件中添加带有 `href` 的项来向侧边栏添加外部链接：

```js filename="_meta.js" {2-5}
export default {
  github_link: {
    title: 'Nextra',
    href: 'https://github.com/shuding/nextra'
  }
}
```

> [!TIP]
>
> 此选项也可用于链接到相对内部路径。

### 分隔线

```ts
type SeparatorSchema = {
  type: 'separator'
  title?: TitleSchema
}
```

您可以使用 `type: 'separator'{:js}` 的"占位符"项在侧边栏项目之间创建分隔线：

```js filename="_meta.js" {3-4}
export default {
  '###': {
    type: 'separator',
    title: 'My Items' // Title is optional
  }
}
```

### 菜单

您还可以使用 `type: 'menu'{:js}` 和 `items` 选项向导航栏添加菜单：

<figure>
  <>![Navbar menu](/assets/docs/menu.png)</>
  {/* prettier-ignore */}
  <figcaption>[Live example on StackBlitz](https://stackblitz.com/edit/nextra-2-docs-2qopvp?file=pages%2F_meta.js)</figcaption>
</figure>

```ts
type MenuItemSchema =
  | TitleSchema
  | { title: TitleSchema }
  | (LinkSchema & { type?: 'page' | 'doc' })
  | SeparatorSchema

type MenuSchema = {
  type: 'menu'
  title?: TitleSchema
  items: Record<string, MenuItemSchema>
}
```

```js filename="_meta.js"
export default {
  company: {
    title: 'Company',
    type: 'menu',
    items: {
      about: {
        title: 'About',
        href: '/about'
      },
      contact: {
        title: 'Contact Us',
        href: 'mailto:hi@example.com'
      }
    }
  }
}
```

### 回退配置

在上述 [`type: 'page'{:js}` 选项](#type-page-option)中，我们需要为每个页面定义 `type: 'page'{:js}` 选项。为简化操作，您可以使用 `'*'` 键为该文件夹中的所有项定义回退配置：

```js filename="_meta.js" {2-4}
export default {
  '*': {
    type: 'page'
  },
  index: 'Home',
  frameworks: 'Frameworks',
  fruits: 'Fruits',
  about: 'About'
}
```

当所有项都设置了 `type: 'page'{:js}` 时，这两种方式是等效的。

### `_meta.global` 文件

您也可以在单个 `_meta` 文件中定义所有页面，文件名后缀为 `.global`。其 API 与文件夹特定的 `_meta` 文件相同，只有 1 个例外：**文件夹项必须包含 `items` 字段**。

对于以下结构，您可以使用以下 `_meta` 文件：

<Block>

<ContentAndAppFileTee className='shrink-0'>
  <FileTree.Folder name="fruits" open>
    <FileTree.File name="_meta.js" active />
    <FileTree.File name="apple.mdx" />
    <FileTree.File name="banana.mdx" />
  </FileTree.Folder>
  <FileTree.File name="_meta.js" active />
  <FileTree.File name="index.mdx" />
</ContentAndAppFileTee>
<div className='mt-6'>
```js filename="_meta.js" copy=false
export default {
  fruits: {
    type: 'page',
    title: '✨ Fruits'
  }
}
```
```js filename="fruits/_meta.js" copy=false
export default {
  apple: '🍎 Apple',
  banana: '🍌 BaNaNa'
}
```
</div>
</Block>

使用单个 `_meta.global` 文件可以如下定义：

```js filename="_meta.global.js" copy=false
export default {
  fruits: {
    type: 'page',
    title: '✨ Fruits',
    items: {
      apple: '🍎 Apple',
      banana: '🍌 BaNaNa'
    }
  }
}
```

> [!WARNING]
>
> 项目中不能同时使用 `_meta.global` 和 `_meta` 文件。

## 须知事项

### 页面排序

你可以使用 ESLint 内置的 `sort-keys` 规则，在 `_meta` 文件顶部添加 `/* eslint sort-keys: error */` 注释，ESLint 就会提示排序错误的警告。

### `_meta` 键的类型

`_meta` 的键类型必须始终**是字符串**而**非数字**，因为在 JavaScript 对象中[数字键总是优先排序](https://dev.to/frehner/the-order-of-js-object-keys-458d)。

例如以下情况：

```js filename="_meta.js" copy=false
export default {
  foo: '',
  1992_10_21: '',
  1: ''
}
```

将会被转换为：

{/* prettier-ignore */}

```js filename="_meta.js" copy=false
export default {
  '1': '',
  '19921021': '',
  foo: ''
}
```

> [!TIP]
>
> `_meta` 文件可以使用 `.js`、`.jsx` 或 `.tsx` 扩展名。