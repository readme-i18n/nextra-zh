---

icon: StarsIcon
---

import { OptionTable } from 'components/_table'
import { compileMdx } from 'nextra/compile'
import { MDXRemote } from 'nextra/mdx-remote'

# è¯­æ³•é«˜äº®

Nextra ä½¿ç”¨ [Shiki](https://shiki.style) åœ¨æ„å»ºæ—¶è¿›è¡Œè¯­æ³•é«˜äº®ï¼Œè¯¥æ–¹æ¡ˆéå¸¸å¯é ä¸”æ€§èƒ½ä¼˜å¼‚ã€‚ä¾‹å¦‚ï¼Œåœ¨ Markdown æ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

````md copy=false filename="Markdown"
```js
console.log('hello, world')
```
````

å°†å‘ˆç°ä¸ºï¼š

```js copy=false
console.log('hello, world')
```

## åŠŸèƒ½ç‰¹æ€§

### è¡Œå†…ä»£ç 

é€šè¿‡ `{:}` è¯­æ³•ä¹Ÿæ”¯æŒè¡Œå†…è¯­æ³•é«˜äº®ï¼Œä¾‹å¦‚ `let x = 1{:jsx}`ï¼š

```md copy=false filename="Markdown"
Inlined syntax highlighting is also supported `let x = 1{:jsx}` via:
```

### é«˜äº®æŒ‡å®šè¡Œ

å¯é€šè¿‡åœ¨ä»£ç å—æ·»åŠ  `{}` å±æ€§æ¥é«˜äº®ç‰¹å®šä»£ç è¡Œï¼š

````md copy=false filename="Markdown"
```js {1,4-5}
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```
````

æ•ˆæœï¼š

```js copy=false {1,4-5}
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

### é«˜äº®å­å­—ç¬¦ä¸²

é€šè¿‡åœ¨ä»£ç å—æ·»åŠ  `//` å±æ€§å¯é«˜äº®ç‰¹å®šå­å­—ç¬¦ä¸²ï¼š

````md copy=false filename="Markdown"
```js /useState/
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```
````

```js copy=false /useState/
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

è‹¥åªéœ€é«˜äº®éƒ¨åˆ†åŒ¹é…é¡¹ï¼Œå¯æ·»åŠ æ•°å­—æ ‡è¯†ï¼š`/str/1`ï¼Œæˆ–å¤šä¸ªæ ‡è¯†ï¼š`/str/1-3`ï¼Œ`/str/1,3`ã€‚

### å¤åˆ¶æŒ‰é’®

æ·»åŠ  `copy` å±æ€§åï¼Œå½“ç”¨æˆ·æ‚¬åœåœ¨ä»£ç å—ä¸Šæ—¶å°†æ˜¾ç¤ºå¤åˆ¶æŒ‰é’®ï¼š

````md copy=false filename="Markdown"
```js copy
console.log('hello, world')
```
````

æ¸²æŸ“æ•ˆæœï¼š

```js copy
console.log('hello, world')
```

> [!NOTE]
>
> å¯é€šè¿‡åœ¨ Nextra é…ç½®æ–‡ä»¶ï¼ˆ`next.config.mjs`ï¼‰ä¸­è®¾ç½® `defaultShowCopyCode: true` å…¨å±€å¯ç”¨æ­¤åŠŸèƒ½ã€‚å…¨å±€å¯ç”¨åï¼Œä»å¯é€šè¿‡ `copy=false` å±æ€§å±€éƒ¨ç¦ç”¨ã€‚

### è¡Œå·æ˜¾ç¤º

é€šè¿‡æ·»åŠ  `showLineNumbers` å±æ€§å¯ä¸ºä»£ç å—æ·»åŠ è¡Œå·ï¼š

````md copy=false filename="Markdown"
```js showLineNumbers
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```
````

æ¸²æŸ“æ•ˆæœï¼š

```js copy=false showLineNumbers
import { useState } from 'react'

function Counter() {
  const [count, setCount] = useState(0)
  return <button onClick={() => setCount(count + 1)}>{count}</button>
}
```

### æ–‡ä»¶åä¸æ ‡é¢˜

é€šè¿‡æ·»åŠ  `filename` å±æ€§å¯ä¸ºä»£ç å—æ·»åŠ æ–‡ä»¶åæˆ–æ ‡é¢˜ï¼š

````md copy=false filename="Markdown"
```js filename="example.js"
console.log('hello, world')
```
````

æ¸²æŸ“æ•ˆæœï¼š

```js copy=false filename="example.js"
console.log('hello, world')
```

### ANSI é«˜äº®

æ”¯æŒé«˜äº® ANSI è½¬ä¹‰ç ï¼š

<ANSI />

export async function ANSI() {
  const rawAnsi = `\`\`\`ansi
[0m [0;32mâœ“[0m [0;2msrc/[0mindex[0;2m.test.ts (1)[0m
  [0;2m Test Files [0m [0;1;32m1 passed[0;98m (1)[0m
  [0;2m      Tests [0m [0;1;32m1 passed[0;98m (1)[0m
  [0;2m   Start at [0m 23:32:41
  [0;2m   Duration [0m 11ms
  [42;1;39;0m PASS [0;32m Waiting for file changes...[0m
         [0;2mpress [0;1mh[0;2m to show help, press [0;1mq[0;2m to quit
\`\`\``
  const rawJs = await compileMdx(`~~~md filename="Markdown"
${rawAnsi}
~~~

Renders:

${rawAnsi}
`)
  return <MDXRemote compiledSource={rawJs} />
}

## æ”¯æŒçš„è¯­è¨€

æŸ¥çœ‹[æ­¤åˆ—è¡¨](https://github.com/shikijs/shiki/blob/main/docs/languages.md)è·å–æ‰€æœ‰æ”¯æŒçš„è¯­è¨€ã€‚

{/* ## Customize the Theme */}

{/* Nextra uses CSS variables to define the colors for tokens. */}

## åŠ¨æ€å†…å®¹å¤„ç†

ç”±äºè¯­æ³•é«˜äº®åœ¨æ„å»ºæ—¶å®Œæˆï¼Œæ‚¨ä¸èƒ½åœ¨ä»£ç å—ä¸­ä½¿ç”¨åŠ¨æ€å†…å®¹ã€‚ä¸è¿‡ï¼Œå€ŸåŠ©MDXçš„å¼ºå¤§åŠŸèƒ½ï¼Œå¯ä»¥é€šè¿‡å®¢æˆ·ç«¯JavaScriptå®ç°å˜é€šæ–¹æ¡ˆã€‚ä¾‹å¦‚ï¼š

import { DynamicCode } from './_dynamic-code'

<DynamicCode>
```js copy=false filename="dynamic-code.js"
function hello() {
  const x = 2 + 3
  console.log(1)
}
```
</DynamicCode>

è¯¥æ–¹æ¡ˆå­˜åœ¨å±€é™æ€§ï¼šæ›´æ–°åçš„å†…å®¹ä¸ä¼šé‡æ–°é«˜äº®æ˜¾ç¤ºã€‚ä¾‹å¦‚è‹¥å°†æ•°å­—æ”¹ä¸º`1 + 1`ï¼Œé«˜äº®æ•ˆæœå°†ä¸æ­£ç¡®ã€‚

æŸ¥çœ‹[ä»£ç ç¤ºä¾‹](https://github.com/shuding/nextra/blob/main/docs/app/docs/guide/syntax-highlighting/_dynamic-code.tsx)äº†è§£å®ç°åŸç†ã€‚

## ç¦ç”¨è¯­æ³•é«˜äº®

æ‚¨å¯ä»¥é€‰æ‹©ç¦ç”¨å†…ç½®è¯­æ³•é«˜äº®åŠŸèƒ½ä»¥ä½¿ç”¨è‡ªå®šä¹‰æ–¹æ¡ˆã€‚é€šè¿‡åœ¨Nextraé…ç½®æ–‡ä»¶ä¸­ï¼ˆ`next.config.mjs`ï¼‰è®¾ç½®`codeHighlight: false`å¯å…¨å±€ç¦ç”¨è¯­æ³•é«˜äº®ã€‚

<OptionTable
  options={[
    [
      'codeHighlight',
      'boolean',
      'Enable or disable syntax highlighting. Defaults to `true`.'
    ]
  ]}
/>

## è‡ªå®šä¹‰è¯­æ³•è§„åˆ™

Shikiæ”¯æŒé€šè¿‡[VSCode TextMateè¯­æ³•è§„åˆ™](https://code.visualstudio.com/api/language-extensions/syntax-highlight-guide)å®ç°è‡ªå®šä¹‰è¯­è¨€çš„è¯­æ³•é«˜äº®ã€‚

æ‚¨å¯ä»¥åœ¨Nextraé…ç½®çš„`mdxOptions.rehypePrettyCodeOptions`é€‰é¡¹ä¸­è¦†å†™`getHighlighter`å‡½æ•°æ¥æä¾›è¿™äº›è¯­æ³•è§„åˆ™ï¼ˆé…ç½®ä½äº`next.config.mjs`ï¼‰ï¼š

```js copy=false filename="next.config.mjs" {13-18}
import { BUNDLED_LANGUAGES } from 'shiki'

nextra({
  // ... other Nextra config options
  mdxOptions: {
    rehypePrettyCodeOptions: {
      getHighlighter: options =>
        getHighlighter({
          ...options,
          langs: [
            ...BUNDLED_LANGUAGES,
            // custom grammar options, see the Shiki documentation for how to provide these options
            {
              id: 'my-lang',
              scopeName: 'source.my-lang',
              aliases: ['mylang'], // Along with id, aliases will be included in the allowed names you can use when writing Markdown
              path: '../../public/syntax/grammar.tmLanguage.json'
            }
          ]
        })
    }
  }
})
```

## è‡ªå®šä¹‰ä¸»é¢˜

åœ¨ `mdxOptions.rehypePrettyCodeOptions` ä¸­ï¼Œæ‚¨ä¹Ÿå¯ä»¥æä¾›è‡ªå®šä¹‰ä¸»é¢˜ï¼Œè€Œæ— éœ€[ä¾èµ– CSS å˜é‡](/docs/guide/syntax-highlighting)ï¼š

```js copy=false filename="next.config.mjs" {4}
nextra({
  // ... other Nextra config options
  mdxOptions: {
    rehypePrettyCodeOptions: {
      // VSCode theme or built-in Shiki theme, see Shiki documentation for more information
      theme: JSON.parse(
        readFileSync('./public/syntax/arctis_light.json', 'utf8')
      )
    }
  }
})
```

### å¤šä¸»é¢˜ï¼ˆæ·±è‰²ä¸æµ…è‰²æ¨¡å¼ï¼‰

å°†æ‚¨çš„ä¸»é¢˜ä¼ é€’ç»™ `theme` å‚æ•°ï¼Œå…¶ä¸­é”®åä»£è¡¨è‰²å½©æ¨¡å¼ï¼š

```js copy=false filename="next.config.mjs" {5-8}
nextra({
  // ... other Nextra config options
  mdxOptions: {
    rehypePrettyCodeOptions: {
      theme: {
        dark: 'nord',
        light: 'min-light'
      }
    }
  }
})
```